<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xmlns:media="http://search.yahoo.com/mrss/">
    <title>elfring.ms</title>
    <link href="https://elfring.ms/feed.xml" rel="self" />
    <link href="https://elfring.ms" />
    <updated>2023-11-19T20:39:24+01:00</updated>
    <author>
        <name>Jörg</name>
    </author>
    <id>https://elfring.ms</id>

    <entry>
        <title>PGP Key</title>
        <author>
            <name>Jörg</name>
        </author>
        <link href="https://elfring.ms/pgp-schluessel.html"/>
        <id>https://elfring.ms/pgp-schluessel.html</id>

        <updated>2023-11-19T20:39:24+01:00</updated>
            <summary>
                <![CDATA[
                    Adresse: &#105;&#110;&#102;&#111;&#x40;&#101;&#108;&#102;&#114;&#105;&#110;&#x67;&#x2e;&#x6d;&#x73; Fingerprint: 44bc07b3-f915-4f56-ac64-2be22a9aa915 -----BEGIN PGP PUBLIC KEY BLOCK----- mDMEZVoj1hYJKwYBBAHaRw8BAQdAY1M10T+fd8PPIPk5Ds9xWVDtsbAkzMXzUm4a wapI4JK0D2luZm9AZWxmcmluZy5tc4iQBBMWCAA4FiEErp6gb9SwJCCdiHW/hBWl rwqBJ9AFAmVaI9YCGwMFCwkIBwIGFQoJCAsCBBYCAwECHgECF4AACgkQhBWlrwqB J9DEBAD/Y3JHJh7TWrlsqRWAg4HgoXxAh8wsjg5irz5ZDUB+nisBAJNfk6wvh3uJ J/YZS//6R4/V7s0tPYNObKEpZ3TDlPsBuDgEZVoj1hIKKwYBBAGXVQEFAQEHQH92 NGBjRv/Gh9mE8l94uFbgIm+YKbEEMPWJUGnGZL1nAwEIB4h4BBgWCAAgFiEErp6g b9SwJCCdiHW/hBWlrwqBJ9AFAmVaI9YCGwwACgkQhBWlrwqBJ9AN0AD9EJOy8tqw nIkSLbmYd5yeVoQWxdpwAwrBD1dvoOkCHIYBALpaR2lSSTTZASfAtOi8rZ7pHrFn Is8dLNYnIAk0w/4D=ohgr -----END PGP PUBLIC KEY BLOCK-----
                ]]>
            </summary>
        <content type="html">
            <![CDATA[
                <p>Adresse:  <a href="mailto:&#105;&#110;&#102;&#111;&#x40;&#101;&#108;&#102;&#114;&#105;&#110;&#x67;&#x2e;&#x6d;&#x73;">&#105;&#110;&#102;&#111;&#x40;&#101;&#108;&#102;&#114;&#105;&#110;&#x67;&#x2e;&#x6d;&#x73;</a></p>
<p>Fingerprint: <code>44bc07b3-f915-4f56-ac64-2be22a9aa915</code></p>
<pre><code>-----BEGIN PGP PUBLIC KEY BLOCK-----
mDMEZVoj1hYJKwYBBAHaRw8BAQdAY1M10T+fd8PPIPk5Ds9xWVDtsbAkzMXzUm4a
wapI4JK0D2luZm9AZWxmcmluZy5tc4iQBBMWCAA4FiEErp6gb9SwJCCdiHW/hBWl
rwqBJ9AFAmVaI9YCGwMFCwkIBwIGFQoJCAsCBBYCAwECHgECF4AACgkQhBWlrwqB
J9DEBAD/Y3JHJh7TWrlsqRWAg4HgoXxAh8wsjg5irz5ZDUB+nisBAJNfk6wvh3uJ
J/YZS//6R4/V7s0tPYNObKEpZ3TDlPsBuDgEZVoj1hIKKwYBBAGXVQEFAQEHQH92
NGBjRv/Gh9mE8l94uFbgIm+YKbEEMPWJUGnGZL1nAwEIB4h4BBgWCAAgFiEErp6g
b9SwJCCdiHW/hBWlrwqBJ9AFAmVaI9YCGwwACgkQhBWlrwqBJ9AN0AD9EJOy8tqw
nIkSLbmYd5yeVoQWxdpwAwrBD1dvoOkCHIYBALpaR2lSSTTZASfAtOi8rZ7pHrFn
Is8dLNYnIAk0w/4D=ohgr
-----END PGP PUBLIC KEY BLOCK-----
</code></pre>

            ]]>
        </content>
    </entry>
    <entry>
        <title>Scotch Eggs</title>
        <author>
            <name>Jörg</name>
        </author>
        <link href="https://elfring.ms/scotch-eggs.html"/>
        <id>https://elfring.ms/scotch-eggs.html</id>
        <media:content url="https://elfring.ms/media/posts/10/scotch_eggs.png" medium="image" />
            <category term="Rezept"/>

        <updated>2023-10-18T18:37:51+02:00</updated>
            <summary>
                <![CDATA[
                        <img src="https://elfring.ms/media/posts/10/scotch_eggs.png" alt="" />
                    <p>Scotch Eggs sind eine Snack Spezialität aus der schottischen Küche und zusammen mit einem guten Bier ein hervorragender Start in das neue Jahr.</p>

                ]]>
            </summary>
        <content type="html">
            <![CDATA[
                    <p><img src="https://elfring.ms/media/posts/10/scotch_eggs.png" class="type:primaryImage" alt="" /></p>
                <p>Scotch Eggs sind eine Snack Spezialität aus der schottischen Küche und zusammen mit einem guten Bier ein hervorragender Start in das neue Jahr.</p>


<h2 id="zutaten">Zutaten</h2>
<ul>
<li>10 Eier</li>
<li>800g Hackfleisch, halb und halb</li>
<li>1 Zwiebel</li>
<li>15g Thymian</li>
<li>25g Petersilie</li>
<li>2 El Worchestershiresauce</li>
<li>2 Tl Senfpulver</li>
<li>Salz, Pfeffer</li>
<li>Mehl und Semmelbrösel zum Panieren</li>
<li>1 kg Öl, Pflanzenfett oder Butterschmalz zum Ausbacken</li>
</ul>
<h2 id="zubereitung">Zubereitung</h2>
<ol>
<li>Die Eier in einen großen Topf mit kaltem Wasser geben.</li>
<li>Das Wasser mit den Eiern bei starker Hitze zum kochen bringen.</li>
<li>Sobald das Wasser kocht vom Herd nehmen und 7 Minuten lang stehen lassen.</li>
<li>Die Eier aus dem Topf nehmen, in kaltem Wasser gut auskühlen lassen und die Schale entfernen.</li>
<li>Die Zwiebel fein hacken und mit dem Hackfleisch, der Worchestershiresauce, dem Senfpulver und den Kräutern gut vermischen.</li>
<li>Mit Salz und Pfeffer abschmecken.</li>
<li>Die Masse in 8 gleiche Teile teilen.</li>
<li>Die Eier umwickeln und mit Mehl, Eiern und dem Paniermehl panieren.</li>
<li>Das Fett in einem Topf erhitzen ( ca. 160-170 °C)</li>
<li>Die Eier darin ca. 10 Minuten goldbraun garen.</li>
</ol>

            ]]>
        </content>
    </entry>
    <entry>
        <title>Corona Stats</title>
        <author>
            <name>Jörg</name>
        </author>
        <link href="https://elfring.ms/corona-stats.html"/>
        <id>https://elfring.ms/corona-stats.html</id>
        <media:content url="https://elfring.ms/media/posts/9/virus-4937553_640.jpg" medium="image" />
            <category term="Covid"/>

        <updated>2023-11-03T21:37:19+01:00</updated>
            <summary>
                <![CDATA[
                        <img src="https://elfring.ms/media/posts/9/virus-4937553_640.jpg" alt="" />
                    <p><strong>Die Statistiken enden im Dezember 2021.</strong></p>
<p>Ein paar Visualisierungen für Covid-19 Statistiken die täglich generiert werden und wahrscheinlich nur mich interessieren.</p>

                ]]>
            </summary>
        <content type="html">
            <![CDATA[
                    <p><img src="https://elfring.ms/media/posts/9/virus-4937553_640.jpg" class="type:primaryImage" alt="" /></p>
                <p><strong>Die Statistiken enden im Dezember 2021.</strong></p>
<p>Ein paar Visualisierungen für Covid-19 Statistiken die täglich generiert werden und wahrscheinlich nur mich interessieren.</p>


<h2 id="7-tage-inzidenz">7-Tage Inzidenz</h2>
<p>Für Münster, Steinfurt und Warendorf.<br><figure class="post__image"><img loading="lazy" src="https://elfring.ms/media/posts/9/inz.png" alt="7-Tage-Inzidenz"  sizes="(max-width: 48em) 100vw, 100vw" srcset="https://elfring.ms/media/posts/9/responsive/inz-xs.png 300w ,https://elfring.ms/media/posts/9/responsive/inz-sm.png 480w ,https://elfring.ms/media/posts/9/responsive/inz-md.png 768w"></figure></p>
<p>Logarithmische Darstellung
<figure class="post__image"><img loading="lazy" src="https://elfring.ms/media/posts/9/inz_log.png" alt="Logarithmische Darstellung"  sizes="(max-width: 48em) 100vw, 100vw" srcset="https://elfring.ms/media/posts/9/responsive/inz_log-xs.png 300w ,https://elfring.ms/media/posts/9/responsive/inz_log-sm.png 480w ,https://elfring.ms/media/posts/9/responsive/inz_log-md.png 768w"></figure></p>
<h2 id="internationale-impf-statistik">Internationale Impf-Statistik</h2>
<h3 id="impfquote-vs-population">Impfquote vs. Population</h3>
<p>Gefiltert auf Länder zwischen einer Million und einer Milliarde Einwohner. Meldungen älter als zwei Wochen werden nicht dargestellt. Nicht alle Länder sind in den Rohdaten enthalten. Die Bevölkerungszahlen basieren auf dem Datensatz von 2019. Die Y Achse ist logarithmisch.<br><figure class="post__image"><img loading="lazy" src="https://elfring.ms/media/posts/9/vacc_population.png" alt="vacc_population"  sizes="(max-width: 48em) 100vw, 100vw" srcset="https://elfring.ms/media/posts/9/responsive/vacc_population-xs.png 300w ,https://elfring.ms/media/posts/9/responsive/vacc_population-sm.png 480w ,https://elfring.ms/media/posts/9/responsive/vacc_population-md.png 768w"></figure></p>
<h3 id="tägliche-impfungen">Tägliche Impfungen</h3>
<p>Meldungen älter als zwei Wochen werden nicht dargestellt.<br><figure class="post__image"><img loading="lazy" src="https://elfring.ms/media/posts/9/vacc_daily.png" alt="vacc_daily" width="500" height="500"  sizes="(max-width: 48em) 100vw, 100vw" srcset="https://elfring.ms/media/posts/9/responsive/vacc_daily-xs.png 300w ,https://elfring.ms/media/posts/9/responsive/vacc_daily-sm.png 480w ,https://elfring.ms/media/posts/9/responsive/vacc_daily-md.png 768w"></figure></p>
<h2 id="datenquellen">Datenquellen</h2>
<ul>
<li>Inzidenzdaten: <a href="https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/Daten/Fallzahlen_Kum_Tab.html">RKI 7-Tage-Inzidenzen nach Bundesländern und Kreisen</a>  </li>
<li>Impfdaten: Mathieu, E., Ritchie, H., Ortiz-Ospina, E. <em>et al.</em> A global database of COVID-19 vaccinations. <em>Nat Hum Behav</em> (2021). <a href="https://doi.org/10.1038/s41562-021-01122-8">https://doi.org/10.1038/s41562-021-01122-8</a>  </li>
<li>Bevölkerungsdaten: <a href="https://data.worldbank.org/indicator/SP.POP.TOTL">The World Bank - Population, total</a></li>
</ul>

            ]]>
        </content>
    </entry>
    <entry>
        <title>Have I been Pwned?</title>
        <author>
            <name>Jörg</name>
        </author>
        <link href="https://elfring.ms/have-i-been-pwned.html"/>
        <id>https://elfring.ms/have-i-been-pwned.html</id>
        <media:content url="https://elfring.ms/media/posts/8/matthew-brodeur-436250-unsplash.png" medium="image" />
            <category term="TechStuff"/>
            <category term="Security"/>

        <updated>2023-10-18T19:14:06+02:00</updated>
            <summary>
                <![CDATA[
                        <img src="https://elfring.ms/media/posts/8/matthew-brodeur-436250-unsplash.png" alt="" />
                    <p>Nachdem die Passwortsammlung “Collection #1” bekannt ist, wird es Zeit einmal die eigenen Logins mit diesen Daten abzugleichen.</p>

                ]]>
            </summary>
        <content type="html">
            <![CDATA[
                    <p><img src="https://elfring.ms/media/posts/8/matthew-brodeur-436250-unsplash.png" class="type:primaryImage" alt="" /></p>
                <p>Nachdem die Passwortsammlung “Collection #1” bekannt ist, wird es Zeit einmal die eigenen Logins mit diesen Daten abzugleichen.</p>


<p>Heute Morgen (17. Januar 2019) veröffentlichte Troy Hunt einen Blogartikel mit dem Titel <a href="https://www.troyhunt.com/the-773-million-record-collection-1-data-reach/">The 773 Million Record “Collection #1” Data Breach</a>.
Troy ist der Initiator von <a href="https://haveibeenpwned.com/">Have I been pwned?</a>.
Ihm wurde ein Datensatz mit knapp <strong>2,7 Milliarden</strong> kompromittierten Username/Passwort Kombinationen zugespielt. Darin enthalten sind 773 Millionen eindeutige eMail-Adressen und darunter natürlich auch einige von meinen eigenen.</p>
<p>Die Information darüber bekam ich übrigens über den Benachrichtigungsdienst von haveibeenpwned.com. Dort die eigenen Adressen zu hinterlegen kann ich nur empfehlen!</p>
<p>Jetzt wäre es natürlich wünschenswert zu wissen welche meiner Konten kompromittiert wurden. Die Seite gibt nur die Information, dass Adressen von mir im Zusammenhang mit Collection #1 auftauchen - aber nicht mit welchen Konten oder Websites die Daten in Verbindung stehen. Das ist soweit auch ok, schließlich möchte man nicht zu viele Informationen über die Verbindung von Adressen zu Webservices an dieser Stelle in Netz liegen haben. Aber wie komme ich jetzt an die betroffenen Dienste?</p>
<p>Hätte ich eine eigene Mail-Domain und hätte ich pro Konto eine individuelle Adresse verwendet, könnte ich die Domain Search nutzen. Aber ehrlich, zwei mal “hätte”… wer betreibt privat wirklich so einen Aufwand? Dieser Dienst ist vor allem sinnvoll für Administratoren von Maildomains mit mehreren Usern geeignet (sprich: Firmen, etc.).
Diese sollten ihn auch dringend nutzen.</p>
<p>Ich bin an dieser Stelle ein wenig stolz auf mich weil ich bereits vor einiger Zeit alle meine Konten mit eindeutigen und komplexen Passworten ausgestattet habe. Das schützt natürlich noch nicht vor schlechter Verschlüsselung auf Serverseite; daher bleibt der Bedarf die kompromittierten Konten zu finden.</p>
<h3 id="die-suche-nach-den-eigenen-passworten">Die Suche nach den eigenen Passworten</h3>
<p>haveibeenpwned.com hat noch einen Service zur Suche nach den Passworten selbst - also in meinem Fall ein eindeutiges Identifizierungsmerkmal. Aber ist es eine gute Idee ein echtes Passwort an irgendeinen Webservice zu schicken? Die API des Webservices arbeitet mit dem Modell der <a href="https://de.wikipedia.org/wiki/K-Anonymit%C3%A4t">k-Anonymität</a> um die Abfrage zu schützen.
Es gibt zwei wesentliche Risiken:</p>
<ul>
<li>Nutzt man das Webformular, wird das Passwort im Browser per Javascript gehasht.
Ich muss also der Site und dem Browser vertrauen. Um dem zu entgehen implementiere ich den Client einfach selbst. Im Formular mehrere hundert Passworte manuell abzugleichen wäre ohnehin recht unpraktisch.</li>
<li>Einen Teil des Hashes preiszugeben macht unter Umständen einen Wörterbuchangriff möglich. Derzeit liefert die API pro Aufruf etwa 500 mögliche Einträge aus dem “Collection#1 Wörterbuch”. Dieses Risiko kann ich aber ignorieren, da aufgefallene Passworte ohnehin geändert werden.</li>
</ul>
<p>Um ganz sicher zu gehen, kann man natürlich auch die ganze Hashdatenbank herunterladen und die eigenen Hashes offline vergleichen.  </p>
<p>Die PWNEDPassword API funktioniert wie folgt:</p>
<ol>
<li>Mein Client errechnet einen SHA-1 Hash des fraglichen Passwortes.</li>
<li>Der Hash wird in einen fünfstelligen Prefix und den 35-stelligen Suffix zerteilt.</li>
<li>Der Prefix wird an die API geschickt und zurück kommt eine Liste von Suffixen mit der Anzahl der PWNs.</li>
<li>Jetzt kann ich die gelieferten Suffixe mit meinem Suffix vergleichen.</li>
<li>Gibt es eine Übereinstimmung, ist das entsprechende Passwort kompromittiert.</li>
<li>Gibt es keine Übereinstimmung habe ich (zur Zeit) kein Problem.</li>
</ol>
<p><figure class="post__image"><img loading="lazy" src="https://elfring.ms/media/posts/8/pwnedpswrds_1.png" alt="Pwned Password API" width="452" height="429"  sizes="(max-width: 48em) 100vw, 100vw" srcset="https://elfring.ms/media/posts/8/responsive/pwnedpswrds_1-xs.png 300w ,https://elfring.ms/media/posts/8/responsive/pwnedpswrds_1-sm.png 480w ,https://elfring.ms/media/posts/8/responsive/pwnedpswrds_1-md.png 768w"></figure>
Der Prozess wird natürlich am besten automatisiert um eine ganze Liste von Passworten abzuarbeiten. Das Script für den Abruf habe ich <a href="https://code.elfring.ms/elfrinjo/my-haveibeenpwned">im Git</a> eingestellt. Es nimmt eine Datei mit Passworten als Argument (Ein Passwort pro Zeile) und gibt einen Bericht in folgendem Format zurück:</p>
<pre><code>$ ./checkPasswordList.sh passwordlist.txt
Checking passwords from list passwordlist.txt
XX: Password P@ssw0rd has been pwned 51259 times.
__: Password CaPZYwyaNKomZCtOBAqYec has not been pwned.
__: Password 8A6dsaEUtOblRKUyYAHRE8m has not been pwned.
==: 1 of 3 passwords have been pwned.
</code></pre>
<p>Das Resultat: Meine Passwortliste scheint im Moment sicher zu sein. Auffällig sind lediglich Handy-PINs und Co. aber damit war zu rechnen und diese PINs werden nicht für Internetkonten verwendet. Die in der Sammlung enthaltenen Daten sind aber möglicherweise schon etwas älter. Der Check muss also ab und zu wiederholt werden.</p>

            ]]>
        </content>
    </entry>
    <entry>
        <title>VPN mit Wireguard</title>
        <author>
            <name>Jörg</name>
        </author>
        <link href="https://elfring.ms/vpn-mit-wireguard.html"/>
        <id>https://elfring.ms/vpn-mit-wireguard.html</id>
        <media:content url="https://elfring.ms/media/posts/7/markus-spiske-793546-unsplash.png" medium="image" />
            <category term="VPN"/>
            <category term="TechStuff"/>
            <category term="Security"/>

        <updated>2023-10-18T19:11:46+02:00</updated>
            <summary>
                <![CDATA[
                        <img src="https://elfring.ms/media/posts/7/markus-spiske-793546-unsplash.png" alt="" />
                    <p>In diesem Blog installiere ich ein VPN Gateway um den eigenen Internettraffic in öffentlichen W-LANs oder anderen potentiell unsicheren Netzen zu verschlüsseln und über einen eigenen Server in das Internet zu routen.</p>

                ]]>
            </summary>
        <content type="html">
            <![CDATA[
                    <p><img src="https://elfring.ms/media/posts/7/markus-spiske-793546-unsplash.png" class="type:primaryImage" alt="" /></p>
                <p>In diesem Blog installiere ich ein VPN Gateway um den eigenen Internettraffic in öffentlichen W-LANs oder anderen potentiell unsicheren Netzen zu verschlüsseln und über einen eigenen Server in das Internet zu routen.</p>


<p>Wireguard ist eine moderne VPN Implementierung im Linux Kernel die mit einer relativ simplen Konfiguration auskommt. Die entsprechende Software wird auf dem Linux Server als dynamisches Kernelmodul installiert. Dabei besteht die Kernelimplementierung von Wireguard gerade einmal aus ca. 4000 Zeilen Code<a href="https://arstechnica.com/gadgets/2018/08/wireguard-vpn-review-fast-connections-amaze-but-windows-support-needs-to-happen/">¹</a>. Für die Clients gibt es entsprechende Pakete über den Packagemanager oder die <a href="https://www.wireguard.com/install/#packages">Wireguard Homepage</a>.</p>
<p>Die Begriffe Client und Server treffen es hier nicht wirklich da Wireguard praktisch “nur” virtuelle Netzwerkinterfaces bereitstellt die untereinander (verschlüsselt) verbunden sind. Der Server erhält seine Rolle dadurch, dass er eine Routinginstanz für den Internettraffic darstellt. Die pink hinterlegten Netzwerkbereiche sehen nur die verschlüsselten Daten.</p>
<p><figure class="post__image"><img loading="lazy" src="https://elfring.ms/media/posts/7/wg-vpn-2.png" alt="" width="600" height="253"  sizes="(max-width: 48em) 100vw, 100vw" srcset="https://elfring.ms/media/posts/7/responsive/wg-vpn-2-xs.png 300w ,https://elfring.ms/media/posts/7/responsive/wg-vpn-2-sm.png 480w ,https://elfring.ms/media/posts/7/responsive/wg-vpn-2-md.png 768w"></figure></p>
<p>Das Resultat ist also, dass der VPN CLient lediglich eine ausgehende, verschlüsselte Verbindung zum VPN Server hat und damit auch in potentiell unsicheren Netzwerken nicht überwacht werden kann.</p>
<h2 id="serverinstallation">Serverinstallation</h2>
<p>Im ersten Schritt wird die Software auf dem Arch Linux Server installiert. Da es sich um ein dynamisches Kernelmodul handelt, müssen auch die Linux-Header mitinstalliert werden. Für andere Distributionen gibt es Installationsanweisungen auf der <a href="https://www.wireguard.com/install/#packages">Projektseite</a>.</p>
<pre><code class="language-bash">$ sudo pacman -Sy linux-headers wireguard-tools wireguard-dkms
</code></pre>
<p><em>Schlüsselpaare</em><br>Als nächstes müssen die privaten und öffentlichen Schlüssel für Client und Server erzeugt werden. <strong>Zur Verdeutlichung habe ich hier die Schlüsselrollen mit in die Keys geschrieben; tatsächlich werden nur die kryptischen Strings erzeugt.</strong></p>
<pre><code class="language-bash">$ wg genkey
4EKnzma4x__SERVER-PRIV__EYvAnEBgPs8p3zAt81A=

$ echo 4EKnzma4x__SERVER-PRIV__EYvAnEBgPs8p3zAt81A= | wg pubkey
31/uhemkNP__SERVER-PUB__n4unk8rHV3G5G/TX0m4=

$ wg genkey
yMvuuQou67g__CLIENT-PRIV__2/ruLh9Nb+gGZz/u0E=

$ echo yMvuuQou67g__CLIENT-PRIV__2/ruLh9Nb+gGZz/u0E= | wg pubkey
BT3mIYb93__CLIENT-PUB__Cg3FrnOsoeG2+7/aRCyg=
</code></pre>
<p><em>Konfiguration</em><br>Mit diesen Keys wird die Wireguard Konfiguration für den Server und den ersten Client erzeugt. Aus dem Namen der Konfigurationsdatei <code>/etc/wireguard/wg0.conf</code> leitet sich anschließend beim starten der Name des VPN Interfaces ab. Die Funktionen der einzelnen Parameter sind Inline komentiert:</p>
<pre><code class="language-toml">## Die VPN-Serverkonfiguration:
[Interface]
# Die Serveradresse im VPN, hier wird auch das gesamte VPN als
# Klasse C Netz definiert:
Address    = 10.1.1.1/24
# Der Listen Port des Servers:
ListenPort = 51820
# Der private Schlüssel des Servers:
PrivateKey = 4EKnzma4x__SERVER-PRIV__EYvAnEBgPs8p3zAt81A=
# Skritpe die bei starten und stoppen des VPN ausgeführt werden
# Hier wird die NAT für das Internetgateway eingerichtet und beim stoppen
# wieder gelöscht. ens3 ist das Internet-Interface des Servers:
PostUp     = iptables -t nat -A POSTROUTING -s 10.1.1.0/24 -o ens3 \
             -j MASQUERADE; \
             iptables -A FORWARD -m conntrack --ctstate RELATED,ESTABLISHED \
             -j ACCEPT; \
             iptables -A FORWARD -i wg0 -o ens3 -j ACCEPT
PostDown   = iptables -t nat -D POSTROUTING -s 10.1.1.0/24 -o ens3 \
             -j MASQUERADE; \
             iptables -D FORWARD -m conntrack --ctstate RELATED,ESTABLISHED \
             -j ACCEPT; \
             iptables -D FORWARD -i wg0 -o ens3 -j ACCEPT

## Die Konfiguration für den ersten Client
[Peer]
# Der öffentliche schüssel des Clients:
PublicKey  = BT3mIYb93__CLIENT-PUB__Cg3FrnOsoeG2+7/aRCyg=
# Die Adresse nutzt der Client innerhalb des VPN:
AllowedIPs = 10.1.1.2/32
</code></pre>
<p>Die Konfiguration sollte nur für root lesbar sein, da der private Serverschlüssel hier hinterlegt ist.</p>
<p>Da der Server als Internetgateway arbeiten soll muss das Forwarding von IP Verbindungen auf dem Server dauerhaft aktiviert werden. Dies erfolgt über einen Eintrag in <code>/etc/sysctl.d/99-sysctl.conf</code>. Dort gemachte Einstellungen werden bei jedem Serverstart geladen.</p>
<pre><code class="language-bash">$ sudo sysctl net.ipv4.ip_forward=1
$ sudo sh -c &#39;echo net.ipv4.ip_forward=1 &gt;&gt; /etc/sysctl.d/99-sysctl.conf&#39;
</code></pre>
<p><em>Das VPN starten</em><br>Das Kommando <code>wg-quick</code> liest diese Konfiguration und baut das VPN Interface auf dem Server auf.</p>
<pre><code class="language-bash">$ sudo wg-quick up wg0
[#] ip link add wg0 type wireguard
[#] wg setconf wg0 /dev/fd/63
[#] ip address add 10.1.1.1/24 dev wg0
[#] ip link set mtu 1420 up dev wg0
[#] iptables -t nat -A POSTROUTING -s 10.1.1.0/24 -o ens3 -j MASQUERADE;
    iptables -A FORWARD -m conntrack --ctstate RELATED,ESTABLISHED -j ACCEPT;
    iptables -A FORWARD -i wg0 -o ens3 -j ACCEPT
</code></pre>
<p>Das VPN Interface soll natürlich automatisch gestartet werden; das kann systemd übernehmen.</p>
<pre><code class="language-bash">$ sudo systemctl enable wg-quick@wg0
Created symlink /etc/systemd/system/multi-user.target.wants/wg-quick@wg0.service
                → /usr/lib/systemd/system/wg-quick@.service.
</code></pre>
<h2 id="client">Client</h2>
<p>Der Android Client ist als Beta Version im Play Store <a href="https://play.google.com/store/apps/details?id=com.wireguard.android">verfügbar</a>
Die Konfiguration selbst sieht dabei der Serverkonfiguration sehr ähnlich und kann über ein Textfile oder einen QR Code importiert werden. Alternativ stehen die Felder auch in der GUI zur Verfügung.</p>
<pre><code class="language-toml">## Das VPN Interface auf dem Client:
[Interface]
Address    = 10.1.1.2/32
PrivateKey = yMvuuQou67g__CLIENT-PRIV__2/ruLh9Nb+gGZz/u0E=
# Ein öffentlicher DNS Server, da wir den aus dem lokalen Netz nicht nutzen
DNS        = 1.1.1.1

## Dieses mal ist der &quot;Peer&quot; unser Server
[Peer]
PublicKey  = 31/uhemkNP__SERVER-PUB__n4unk8rHV3G5G/TX0m4=
# Die AllowedIPs sind hier die Adressen die in das VPN geroutet werden sollen,
# ... also alle
AllowedIPs = 0.0.0.0/0
Endpoint   = vpnserver.example.com:51820
</code></pre>
<h2 id="test">Test</h2>
<p>Damit kann das VPN auch auf dem Client gestartet werden. Um zu testen ob wir uns im Tunnel befinden, können wir zwei Tests machen:</p>
<ul>
<li>Vom Client aus kann die private Adresse des Peers 10.1.1.1 angepingt werden. Dies wäre über die Internetleitung nicht möglich.</li>
<li>Ein Dienst wie <a href="https://icanhazip.com/">https://icanhazip.com/</a> liefert die öffentliche Adresse des Servers zurück, nicht mehr die des Smartphones.</li>
</ul>

            ]]>
        </content>
    </entry>
    <entry>
        <title>RPN Spundungsrechner</title>
        <author>
            <name>Jörg</name>
        </author>
        <link href="https://elfring.ms/rpn-spundungsrechner-3.html"/>
        <id>https://elfring.ms/rpn-spundungsrechner-3.html</id>
        <media:content url="https://elfring.ms/media/posts/6/Hp42s_face.png" medium="image" />
            <category term="TechStuff"/>
            <category term="RPN"/>
            <category term="Homebrew"/>
            <category term="CraftBeer"/>

        <updated>2023-10-18T19:15:21+02:00</updated>
            <summary>
                <![CDATA[
                        <img src="https://elfring.ms/media/posts/6/Hp42s_face.png" alt="" />
                    <p>Spunden ist ist das Anreichern von Getränken &ndash; hier Bier &ndash; mit Kohlenstoffdioxid.</p>

                ]]>
            </summary>
        <content type="html">
            <![CDATA[
                    <p><img src="https://elfring.ms/media/posts/6/Hp42s_face.png" class="type:primaryImage" alt="" /></p>
                <p>Spunden ist ist das Anreichern von Getränken &ndash; hier Bier &ndash; mit Kohlenstoffdioxid.</p>
 

<p>Den richtigen CO<sub>2</sub>-Druck liest man klassisch aus der <a href="https://hobbybrauer.de/forum/wiki/doku.php/spundungstabelle">Spundungstabelle</a> ab. Praktischer ist es, einen Spundungsrechner auf dem Handy zu haben. Noch besser ist es natürlich die Berechnung auf einer mobilen 80er Jahre Plattform zu machen.</p>
<p>Damals&#153; gab es noch programmierbare Taschenrechner. Die konnten zwar nicht so viel wie moderne Apps, waren aber deutlich praktischer um kleine Rechenarbeiten zu programmieren. Heute kann man Thomas Okkens exzellente Emulation <a href="http://thomasokken.com/free42/">Free42</a> des HP-42S für alle möglichen Plattformen nutzen um RPN Programme wieder auferstehen zu lassen. Wer lieber auf Hardware setzt, wird bei <a href="https://www.swissmicros.com/">SwissMicros</a> fündig. Dort hat Michael Steinmann mit dem DM42 eine passende Hardware für den Emulator entwickelt.</p>
<p>Die Berechnung der gelösten Kohlensäure erfolgt, laut der Webseite <a href="http://braukaiser.com/wiki/index.php/Carbonation_Tables">Braukaiser</a>, nach der folgenden Formel:
$$
\beta_{(p,\vartheta)} = ( p + 1,013) \times { \mathrm{e}^{ -10,73797 + \frac{2617,25}{\vartheta + 273,15}}} \times 10
$$
$\beta:$ CO<sub>2</sub> Konzentration in g/&ell;<br>$p:$ Überdruck zur Karbonisierung in bar<br>$\vartheta:$ Temperatur in °C  </p>
<p>Um diese Formel mit dem Solver des HP-42S zu nutzen muss sie zunächst so umgestellt werden, dass auf einer Seite 0 steht. Anschließend wird die Rechnung auf der andere Seite in einem RPN Programm umgesetzt. MVAR füllt dabei das Menü des Solvers.</p>
<pre><code>LBL &quot;Spnd&quot;
MVAR &quot;bar&quot;
MVAR &quot;°C&quot;
MVAR &quot;g/l&quot;
2617,25
273,15
RCL &quot;°C&quot;
+
/
10,73797
-
E^X
RCL &quot;bar&quot;
1,013
+
*
10
*
RCL &quot;g/l&quot;
-
END
</code></pre>
<p>Das Programm kann kann über die Tasten SOLVER und SPND gestartet werden. Parameter werden über die Zifferntasten, gefolgt vom Softkey für die Variable eingegeben. Das Ergebnis wird dann über den entsprechenden Softkey abgefragt. Für 5,5 g/&ell; CO<sub>2</sub> und einer Temperatur von 7 °C ergibt sich damit ein Spundungsdruck von 1,2 bar:<br><figure class="post__image"><img loading="lazy" src="https://elfring.ms/media/posts/6/1.2bar.png" alt="Ergebnis: 1,2077 bar" width="313" height="164"  sizes="(max-width: 48em) 100vw, 100vw" srcset="https://elfring.ms/media/posts/6/responsive/1.2bar-xs.png 300w ,https://elfring.ms/media/posts/6/responsive/1.2bar-sm.png 480w ,https://elfring.ms/media/posts/6/responsive/1.2bar-md.png 768w"></figure></p>

            ]]>
        </content>
    </entry>
    <entry>
        <title>Chili con Carne con Stout</title>
        <author>
            <name>Jörg</name>
        </author>
        <link href="https://elfring.ms/chili-con-carne-con-stout.html"/>
        <id>https://elfring.ms/chili-con-carne-con-stout.html</id>
        <media:content url="https://elfring.ms/media/posts/1/stoutchili.png" medium="image" />
            <category term="Rezept"/>

        <updated>2023-10-18T18:40:56+02:00</updated>
            <summary>
                <![CDATA[
                        <img src="https://elfring.ms/media/posts/1/stoutchili.png" alt="" />
                    <p>Ich starte das Blog mit einem Rezept für Chili con Carne mit Stout als Geheimzutat. Das Chili ist innerhalb von 20 Minuten zubereitet und muss dann nur noch vor sich hin köcheln.</p>

                ]]>
            </summary>
        <content type="html">
            <![CDATA[
                    <p><img src="https://elfring.ms/media/posts/1/stoutchili.png" class="type:primaryImage" alt="" /></p>
                <p>Ich starte das Blog mit einem Rezept für Chili con Carne mit Stout als Geheimzutat. Das Chili ist innerhalb von 20 Minuten zubereitet und muss dann nur noch vor sich hin köcheln.</p>
 

<h2 id="zutaten">Zutaten</h2>
<ul>
<li>1200 g gewürfelte Tomaten (3 Dosen)</li>
<li>900 g Rinderhack</li>
<li>1 Metzgerzwiebel (Die richtig großen)</li>
<li>2-3 Knoblauchzehen</li>
<li>2-3 Chilischoten</li>
<li>500 g Kidenybohnen</li>
<li>2&ell; Stout (Möglichst wenig IBU)</li>
<li>3-4 Tl Kreuzkümmel</li>
<li>1 Zimtstange</li>
<li>Salz, Pfeffer, Tabasco Soße, Chilipulver</li>
</ul>
<p>Servieren mit:</p>
<ul>
<li>Baguettebrot</li>
<li>Schmand</li>
</ul>
<h2 id="zubereitung">Zubereitung</h2>
<ol>
<li>Das Hackfleisch scharf anbraten und dabei zerkleinern.</li>
<li>Die Zwiebel würfeln und glasig anschwitzen.</li>
<li>Die Chilischoten in feine Ringe schneiden und mit den Kernen dazugeben.</li>
<li>Die übrigen Zutaten (bis auf die Bohnen) dazugeben. Die Knoblauchzehen werden vorher geschält und leicht zerdrückt.</li>
<li>Das Chili 60 Minuten lang offen kochen.</li>
<li>Währenddessen die Bohnen abtropfen lassen, anschließend hinzugeben, weitere 30 Minuten offen köcheln lassen und noch einmal abschmecken.</li>
</ol>

            ]]>
        </content>
    </entry>
</feed>
